<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
		xmlns:s="library://ns.adobe.com/flex/spark" title="Bus Times">
	<fx:Declarations>
	
	</fx:Declarations>
	<s:List id="newdata" left="0" right="0" top="100" bottom="0"
			color="#000000" dataProvider="{new_data}" >
		
		<s:itemRenderer>
			<fx:Component>
				<s:IconItemRenderer
					
					label="{data.route}"
				
					/>
			</fx:Component>
		</s:itemRenderer>
		
	</s:List>
	<s:TextInput id="textbox" x="178" y="26" width="442" change="search(textbox.text)"/>
	<s:Label id="lbl" x="31" y="26" width="139" height="55"/>
	<fx:Script>
		<![CDATA[
			import mx.collections.ArrayCollection;
			
			import spark.events.IndexChangeEvent;
			[Bindable]
			public var home_data:ArrayCollection = new ArrayCollection([
				{route: "114", num: 114},
				{route: "97" , num: 97},
				{route: "118", num: 118},
				{route: "146", num: 146},
				{route: "87", num: 87},
				{route: "1" , num: 1},
				{route: "86", num: 86},
				{route: "112", num: 112},
				{route: "144", num: 144},
				
				]);
			[Bindable]
			public var new_data:ArrayCollection = home_data
			public var i:int
			public function search(query:String):void
			{
				var hold:Object;
				new_data=new ArrayCollection();
				var a:int = 0
				
				for (i=0;i<home_data.length;i++)
				{
					var b:String = home_data[i].route
					if (query.length == 3)
					{
						
						if (query == b)
						{
							a=1		
							new_data.addItem(home_data[i])
						}
						
					}
					else if (query.length == 2)
					{
						if (query.charAt(0) == b.charAt(0))
							{
								if (query.charAt(1) == b.charAt(1))
									{
									new_data.addItem(home_data[i])
									a=1
									}
							}
						
					}
					else if (query.length == 1)
					{
						if (query.charAt(0) == b.charAt(0))
							{
								new_data.addItem(home_data[i])
									a=1
							}
					}
					else 
					{
						new_data = home_data
						break;
					}
				}
				if (a != 1)
				{
					new_data = home_data
				}
				lbl.text = new_data.length.toString()
				for (var j:int=0; j<new_data.length/2;j++)
				{
					for (i=new_data.length/2-1; i>=1;i--)
					{
						if (new_data[i].num < new_data[i-1].num)
						{
							hold = new_data[i-1]
							new_data[i-1] = new_data[i]
							new_data[i] = hold
						}
					}
				}
			}
			
			
			]]>
	</fx:Script>
</s:View>
